# AgentPump ä»£ç ä¿®å¤çŠ¶æ€å¯¹æ¯”æŠ¥å‘Š

**å¯¹æ¯”åŸºå‡†**: Manus CTOçº§è¯„å®¡æŠ¥å‘Š (2026-02-01)  
**å½“å‰ä»£ç ç‰ˆæœ¬**: æœ€æ–°å®ç°ï¼ˆåŒ…å«Virtual AMMå’ŒGraduationæœºåˆ¶ï¼‰  
**ç”Ÿæˆæ—¥æœŸ**: 2026-02-01

---

## 1. å·²ä¿®å¤çš„ä¸¥é‡é—®é¢˜ âœ…

### 1.1 å–å‡ºåŠŸèƒ½ç¼ºå¤± âœ… **å·²ä¿®å¤**
- **æŠ¥å‘Šé—®é¢˜**: `sell`å‡½æ•°å®Œå…¨æœªå®ç°ï¼Œç”¨æˆ·æ— æ³•å–å‡ºä»£å¸
- **å½“å‰çŠ¶æ€**: âœ… å·²å®ç°å®Œæ•´çš„`sell()`å‡½æ•°
- **å®ç°ä½ç½®**: `contracts/AgentBondingCurve.sol:246-303`
- **ä¿®å¤å†…å®¹**: 
  - å®ç°äº†åŸºäºVirtual AMMçš„å–å‡ºé€»è¾‘
  - æ­£ç¡®å¤„ç†è´¹ç”¨åˆ†é…
  - åŒ…å«slippageä¿æŠ¤

### 1.2 æ‰‹ç»­è´¹é€»è¾‘ä¸å®Œæ•´ âœ… **å·²ä¿®å¤**
- **æŠ¥å‘Šé—®é¢˜**: è´¹ç”¨è¢«è®¡ç®—ä½†æœªè½¬è´¦ï¼Œå¯¼è‡´èµ„é‡‘æ··æ‚å’Œé”å®š
- **å½“å‰çŠ¶æ€**: âœ… å·²å®ç°å®Œæ•´çš„è´¹ç”¨æå–æœºåˆ¶
- **å®ç°ä½ç½®**: 
  - `withdrawProtocolFees()` - `contracts/AgentBondingCurve.sol:368-375`
  - `withdrawCreatorFees()` - `contracts/AgentBondingCurve.sol:377-386`
  - `withdrawTreasury()` - `contracts/AgentBondingCurve.sol:388-395`
- **ä¿®å¤å†…å®¹**:
  - è´¹ç”¨æ­£ç¡®ç´¯ç§¯åˆ°ç‹¬ç«‹çš„mappingä¸­
  - æä¾›æå–å‡½æ•°ä¾›åè®®å’Œåˆ›å»ºè€…ä½¿ç”¨
  - Launch Feeå’ŒGraduation Feeç´¯ç§¯åˆ°protocolTreasury

### 1.3 äº‹ä»¶å®šä¹‰é”™è¯¯ âœ… **å·²ä¿®å¤**
- **æŠ¥å‘Šé—®é¢˜**: `TokenLaunched`äº‹ä»¶è¢«é”™è¯¯è°ƒç”¨ä¸º`TokenCreated`ï¼Œå¯¼è‡´ç¼–è¯‘å¤±è´¥
- **å½“å‰çŠ¶æ€**: âœ… å·²ç»Ÿä¸€ä½¿ç”¨`TokenLaunched`äº‹ä»¶
- **å®ç°ä½ç½®**: `contracts/AgentBondingCurve.sol:50, 138, 151`

### 1.4 åˆ›å»ºè€…å¥–åŠ±æœªå®ç° âœ… **å·²ä¿®å¤**
- **æŠ¥å‘Šé—®é¢˜**: 20%ä»£å¸ä¾›åº”é‡å½’å±åˆ›å»ºè€…çš„é€»è¾‘å®Œå…¨æœªå®ç°
- **å½“å‰çŠ¶æ€**: âœ… å·²åœ¨launchTokenæ—¶mint 20%ç»™åˆ›å»ºè€…
- **å®ç°ä½ç½®**: `contracts/AgentBondingCurve.sol:122-124`
- **ä¿®å¤å†…å®¹**:
  ```solidity
  uint256 creatorAmount = (MAX_SUPPLY * CREATOR_VESTING_BPS) / 10000;
  AgentToken(tokenAddr).mint(msg.sender, creatorAmount);
  ```

### 1.5 æ— ä¾›åº”é‡ä¸Šé™ âœ… **å·²ä¿®å¤**
- **æŠ¥å‘Šé—®é¢˜**: AgentTokenå­˜åœ¨æ— é™å¢å‘çš„é£é™©
- **å½“å‰çŠ¶æ€**: âœ… å·²æ·»åŠ MAX_SUPPLYå¸¸é‡
- **å®ç°ä½ç½®**: `contracts/AgentBondingCurve.sol:65`
- **ä¿®å¤å†…å®¹**: `uint256 public constant MAX_SUPPLY = 1_000_000_000 * 1e18;`

### 1.6 éƒ¨ç½²è„šæœ¬é”™è¯¯ âœ… **å·²ä¿®å¤**
- **æŠ¥å‘Šé—®é¢˜**: éƒ¨ç½²è„šæœ¬æœªä¼ é€’æ„é€ å‡½æ•°å¿…éœ€çš„`_signer`å‚æ•°
- **å½“å‰çŠ¶æ€**: âœ… å·²ä¿®å¤éƒ¨ç½²è„šæœ¬
- **å®ç°ä½ç½®**: `scripts/deploy.js:16`
- **ä¿®å¤å†…å®¹**: ç°åœ¨æ­£ç¡®ä¼ é€’signerå’ŒUniswap Routeråœ°å€

### 1.7 è”åˆæ›²çº¿å®šä»· âœ… **å·²æ”¹è¿›**
- **æŠ¥å‘Šé—®é¢˜**: ä½¿ç”¨å›ºå®šä»·æ ¼è€Œéç§¯åˆ†å®šä»·ï¼Œå­˜åœ¨å¥—åˆ©ç©ºé—´
- **å½“å‰çŠ¶æ€**: âœ… å·²æ”¹ä¸ºVirtual AMM (x * y = k)æ¨¡å‹
- **å®ç°ä½ç½®**: `contracts/AgentBondingCurve.sol:162-243`
- **æ”¹è¿›å†…å®¹**: 
  - ä½¿ç”¨constant productå…¬å¼
  - ä»·æ ¼éšä¾›éœ€åŠ¨æ€å˜åŒ–
  - ä½†ä»éœ€æ³¨æ„ï¼šå½“å‰å®ç°ä¸­kå€¼ä¼šå˜åŒ–ï¼ˆbonding curveç‰¹æ€§ï¼‰

---

## 2. éƒ¨åˆ†ä¿®å¤çš„é—®é¢˜ âš ï¸

### 2.1 ç­¾åé‡æ”¾æ”»å‡» âš ï¸ **éƒ¨åˆ†ä¿®å¤**
- **æŠ¥å‘Šé—®é¢˜**: ç­¾åç¼ºå°‘nonceã€chainIdå’Œdeadlineï¼Œå¯è¢«æ— é™æ¬¡é‡æ”¾
- **å½“å‰çŠ¶æ€**: âš ï¸ å·²æ·»åŠ nonceï¼Œä½†ç¼ºå°‘chainIdå’Œdeadline
- **å®ç°ä½ç½®**: 
  - åˆçº¦: `contracts/AgentBondingCurve.sol:72, 109, 114`
  - å‰ç«¯API: `frontend/pages/api/verify.ts:51-76`
- **å·²ä¿®å¤**:
  - âœ… æ·»åŠ äº†nonceæœºåˆ¶é˜²æ­¢é‡æ”¾
  - âœ… åœ¨åˆçº¦ä¸­éªŒè¯nonceé€’å¢
- **ä»éœ€ä¿®å¤**:
  - âŒ ç­¾åæ¶ˆæ¯ä¸­ç¼ºå°‘`chainId`ï¼ˆé˜²æ­¢è·¨é“¾é‡æ”¾ï¼‰
  - âŒ ç­¾åæ¶ˆæ¯ä¸­ç¼ºå°‘`deadline`ï¼ˆé˜²æ­¢ç­¾åè¿‡æœŸï¼‰
- **å»ºè®®ä¿®å¤**:
  ```solidity
  // åœ¨åˆçº¦ä¸­
  bytes32 messageHash = keccak256(abi.encodePacked(
      msg.sender, 
      name, 
      symbol, 
      nonce,
      block.chainid,  // æ·»åŠ chainId
      deadline         // æ·»åŠ deadline
  ));
  require(block.timestamp <= deadline, "Signature expired");
  ```

---

## 3. ä»éœ€ä¿®å¤çš„é—®é¢˜ âŒ

### 3.1 ç¼ºå°‘ç´§æ€¥æš‚åœæœºåˆ¶ âŒ **æœªå®ç°**
- **æŠ¥å‘Šé—®é¢˜**: åˆçº¦æ²¡æœ‰pauseåŠŸèƒ½ï¼Œä¸€æ—¦å‘ç°æ¼æ´æ— æ³•åŠæ—¶æ­¢æŸ
- **å½“å‰çŠ¶æ€**: âŒ æœªå®ç°
- **å»ºè®®å®ç°**:
  ```solidity
  import "@openzeppelin/contracts/security/Pausable.sol";
  
  contract AgentPumpFactory is Ownable, ReentrancyGuard, Pausable {
      function pause() external onlyOwner {
          _pause();
      }
      
      function buy(...) external payable whenNotPaused {
          // ...
      }
  }
  ```

### 3.2 åç«¯ç­¾åæœåŠ¡ âŒ **ä»ä¸ºæ¨¡æ‹Ÿå®ç°**
- **æŠ¥å‘Šé—®é¢˜**: `/api/verify`ç«¯ç‚¹å®Œå…¨æ˜¯æ¨¡æ‹Ÿçš„ï¼Œè¿”å›ç¡¬ç¼–ç ç­¾å
- **å½“å‰çŠ¶æ€**: âš ï¸ å·²å®ç°çœŸå®ç­¾åï¼Œä½†ä»ä¾èµ–Moltbook APIï¼ˆå¯èƒ½ä¸å­˜åœ¨ï¼‰
- **å®ç°ä½ç½®**: `frontend/pages/api/verify.ts`
- **é—®é¢˜**:
  - Moltbook APIå¯èƒ½ä¸å­˜åœ¨æˆ–ä¸å¯ç”¨
  - éœ€è¦ä¸Moltbookå›¢é˜Ÿæ²Ÿé€šè·å–çœŸå®API
  - æˆ–å¯»æ‰¾æ›¿ä»£éªŒè¯æ–¹æ¡ˆ

### 3.3 Gasä¼˜åŒ– âš ï¸ **æœªä¼˜åŒ–**
- **æŠ¥å‘Šé—®é¢˜**: Hardhaté…ç½®ä¸­è®¾ç½®äº†å›ºå®šGas Priceï¼Œåœ¨EIP-1559ç½‘ç»œä¸­ä¸æ¨è
- **å½“å‰çŠ¶æ€**: âš ï¸ ä»ä½¿ç”¨å›ºå®šgasPrice
- **å®ç°ä½ç½®**: `hardhat.config.js:10`
- **å»ºè®®**: ç§»é™¤å›ºå®šgasPriceï¼Œè®©ç½‘ç»œè‡ªåŠ¨é€‰æ‹©

---

## 4. æ–°å¢åŠŸèƒ½ï¼ˆè¶…å‡ºæŠ¥å‘ŠèŒƒå›´ï¼‰âœ¨

### 4.1 Graduationæœºåˆ¶ âœ¨ **æ–°å¢**
- **åŠŸèƒ½**: å½“collateralè¾¾åˆ°20 ETHæ—¶è‡ªåŠ¨è¿ç§»åˆ°Uniswap V2
- **å®ç°ä½ç½®**: `contracts/AgentBondingCurve.sol:305-366`
- **ç‰¹æ€§**:
  - è‡ªåŠ¨æ£€æµ‹é˜ˆå€¼
  - æå–2 ETHä½œä¸ºGraduation Fee
  - åˆ›å»ºUniswap V2æµåŠ¨æ€§æ± 
  - LP tokenå‘é€åˆ°deadåœ°å€

### 4.2 Launch Feeæœºåˆ¶ âœ¨ **æ–°å¢**
- **åŠŸèƒ½**: æ”¶å–0.005 ETHä½œä¸ºLaunch Fee
- **å®ç°ä½ç½®**: `contracts/AgentBondingCurve.sol:99, 105`
- **ç‰¹æ€§**: Launch Feeç´¯ç§¯åˆ°protocolTreasury

### 4.3 Virtual AMMå®ç° âœ¨ **æ–°å¢**
- **åŠŸèƒ½**: ä½¿ç”¨Virtual AMM (x * y = k)æ¨¡å‹
- **å®ç°ä½ç½®**: `contracts/AgentBondingCurve.sol:162-303`
- **ç‰¹æ€§**: 
  - æ›´å¹³æ»‘çš„ä»·æ ¼æ›²çº¿
  - ä¸Uniswapå…¼å®¹ï¼Œä¾¿äºè¿ç§»

---

## 5. ä¿®å¤ä¼˜å…ˆçº§å»ºè®®

### P0 - ä¸Šçº¿å‰å¿…é¡»ä¿®å¤ ğŸ”´
1. **æ·»åŠ chainIdå’Œdeadlineåˆ°ç­¾åéªŒè¯** - é˜²æ­¢è·¨é“¾é‡æ”¾å’Œç­¾åè¿‡æœŸ
2. **å®ç°Pausableæœºåˆ¶** - ç´§æ€¥æƒ…å†µä¸‹å¯ä»¥æš‚åœåˆçº¦
3. **éªŒè¯Moltbook APIå¯ç”¨æ€§** - æˆ–å®ç°æ›¿ä»£éªŒè¯æ–¹æ¡ˆ

### P1 - MVPé˜¶æ®µå»ºè®®ä¿®å¤ ğŸŸ¡
1. **Gasä¼˜åŒ–** - ç§»é™¤å›ºå®šgasPriceé…ç½®
2. **æ·»åŠ æ›´å¤šè¾“å…¥éªŒè¯** - é˜²æ­¢æ¶æ„è¾“å…¥
3. **å®Œå–„é”™è¯¯å¤„ç†** - æä¾›æ›´æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯

### P2 - é•¿æœŸä¼˜åŒ– ğŸŸ¢
1. **ä¸“ä¸šå®‰å…¨å®¡è®¡** - åœ¨ä¸»ç½‘ä¸Šçº¿å‰å¿…é¡»è¿›è¡Œ
2. **å‰ç«¯æ”¹è¿›** - æ·»åŠ æ›´å¤šåŠŸèƒ½å’Œæ•°æ®å±•ç¤º
3. **æ–‡æ¡£å®Œå–„** - æ·»åŠ è¯¦ç»†çš„APIæ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—

---

## 6. æ€»ç»“

### ä¿®å¤è¿›åº¦
- âœ… **å·²ä¿®å¤**: 7ä¸ªä¸¥é‡é—®é¢˜
- âš ï¸ **éƒ¨åˆ†ä¿®å¤**: 1ä¸ªé—®é¢˜ï¼ˆç­¾åé‡æ”¾ï¼‰
- âŒ **æœªä¿®å¤**: 2ä¸ªé—®é¢˜ï¼ˆæš‚åœæœºåˆ¶ã€Gasä¼˜åŒ–ï¼‰
- âœ¨ **æ–°å¢åŠŸèƒ½**: 3ä¸ªé‡è¦åŠŸèƒ½ï¼ˆGraduationã€Launch Feeã€Virtual AMMï¼‰

### æ€»ä½“è¯„ä¼°
ç›¸æ¯”ManusæŠ¥å‘Šæ—¶çš„ä»£ç ï¼Œå½“å‰ç‰ˆæœ¬å·²ç»ä¿®å¤äº†**å¤§éƒ¨åˆ†ä¸¥é‡é—®é¢˜**ï¼Œç‰¹åˆ«æ˜¯ï¼š
- âœ… å®ç°äº†å®Œæ•´çš„ä¹°å–åŠŸèƒ½
- âœ… ä¿®å¤äº†æ‰‹ç»­è´¹å¤„ç†é€»è¾‘
- âœ… å®ç°äº†åˆ›å»ºè€…å¥–åŠ±æœºåˆ¶
- âœ… æ·»åŠ äº†ä¾›åº”é‡ä¸Šé™
- âœ… æ”¹è¿›äº†è”åˆæ›²çº¿æ•°å­¦æ¨¡å‹

ä½†ä»éœ€å…³æ³¨ï¼š
- âš ï¸ ç­¾åå®‰å…¨æ€§çš„è¿›ä¸€æ­¥å®Œå–„ï¼ˆchainIdã€deadlineï¼‰
- âŒ ç´§æ€¥æš‚åœæœºåˆ¶çš„å®ç°
- âš ï¸ åç«¯éªŒè¯æœåŠ¡çš„å¯é æ€§

**å»ºè®®**: åœ¨ä¿®å¤P0ä¼˜å…ˆçº§é—®é¢˜åï¼Œå¯ä»¥è¿›è¡Œæµ‹è¯•ç½‘éƒ¨ç½²å’Œæµ‹è¯•ã€‚ä¸»ç½‘ä¸Šçº¿å‰å¿…é¡»å®Œæˆä¸“ä¸šå®‰å…¨å®¡è®¡ã€‚
