# æ™ºèƒ½åˆçº¦ä¿®å¤æ€»ç»“

## ä¿®å¤æ—¥æœŸ
2026-02-01

## ä¿®å¤çš„é—®é¢˜

### ğŸ”´ é«˜é£é™©é—®é¢˜

#### 1. Virtual AMM ä¹°å…¥å…¬å¼è¯´æ˜ âœ… å·²ä¿®å¤
**é—®é¢˜**: ä¹°å…¥å’Œå–å‡ºå…¬å¼ä¸ä¸€è‡´ï¼Œå¯èƒ½å¯¼è‡´å¥—åˆ©
**ä¿®å¤**: 
- æ·»åŠ äº†è¯¦ç»†çš„è®¾è®¡è¯´æ˜æ³¨é‡Š
- æ˜ç¡®è¯´æ˜è¿™æ˜¯bonding curveçš„è®¾è®¡æ„å›¾ï¼ˆä¹°å…¥çº¿æ€§ï¼Œå–å‡ºconstant productï¼‰
- æ·»åŠ äº†æ•°å­¦éªŒè¯æ³¨é‡Š
- æ·»åŠ äº†å®‰å…¨æ£€æŸ¥

**ä½ç½®**: `_buy()` å‡½æ•° Line 277-318

#### 2. Graduationè¿”å›å€¼æ£€æŸ¥ âœ… å·²ä¿®å¤
**é—®é¢˜**: Uniswapè°ƒç”¨å¤±è´¥æ—¶å¯èƒ½ä¸è¢«æ£€æµ‹
**ä¿®å¤**:
- æ·»åŠ äº†liquidity > 0æ£€æŸ¥
- æ·»åŠ äº†amountTokenå’ŒamountETHéªŒè¯
- æ·»åŠ äº†slippageéªŒè¯
- æ·»åŠ äº†LP tokenåœ°å€éªŒè¯

**ä½ç½®**: `_graduate()` å‡½æ•° Line 479-487

### ğŸŸ¡ ä¸­é£é™©é—®é¢˜

#### 3. getSellQuoteä½¿ç”¨require âœ… å·²ä¿®å¤
**é—®é¢˜**: viewå‡½æ•°ä½¿ç”¨requireä¼šåœ¨æŸäº›æƒ…å†µä¸‹revert
**ä¿®å¤**:
- å°†requireæ”¹ä¸ºifè¯­å¥è¿”å›0
- æ·»åŠ äº†å®‰å…¨æ£€æŸ¥é€»è¾‘

**ä½ç½®**: `getSellQuote()` å‡½æ•° Line 575-585

#### 4. å–å‡ºå…¬å¼ä¸‹æº¢æ£€æŸ¥ âœ… å·²ä¿®å¤
**é—®é¢˜**: æç«¯æƒ…å†µä¸‹å¯èƒ½ä¸‹æº¢
**ä¿®å¤**:
- æ·»åŠ äº†x1 > 0æ£€æŸ¥
- æ·»åŠ äº†y1 > y0æ£€æŸ¥
- æ·»åŠ äº†subtraction underflowæ£€æŸ¥

**ä½ç½®**: `_sell()` å‡½æ•° Line 388-398

### ğŸŸ¢ ä½é£é™©é—®é¢˜

#### 5. æœ€å°äº¤æ˜“é‡‘é¢é™åˆ¶ âœ… å·²ä¿®å¤
**é—®é¢˜**: å°é¢äº¤æ˜“å¯èƒ½å¯¼è‡´è´¹ç”¨ä¸å‡†ç¡®
**ä¿®å¤**:
- æ·»åŠ äº†MIN_TRADE_AMOUNTå¸¸é‡ï¼ˆ0.0001 ETHï¼‰
- ä¹°å…¥æ—¶æ£€æŸ¥ethAmount >= MIN_TRADE_AMOUNT
- å–å‡ºæ—¶ä¼°ç®—ETHä»·å€¼å¹¶æ£€æŸ¥

**ä½ç½®**: 
- Constants Line 64
- `_buy()` å‡½æ•° Line 253
- `sell()` å‡½æ•° Line 360-366

#### 6. åè®®è´¹ç”¨è®¾ç½®æ”¹è¿› âœ… å·²ä¿®å¤
**é—®é¢˜**: setProtocolFeeä½¿ç”¨legacy creatorFeeBpsæ£€æŸ¥
**ä¿®å¤**:
- ä½¿ç”¨æœ€å¤§åŠ¨æ€åˆ›å»ºè€…è´¹ç”¨ï¼ˆ95 bpsï¼‰è¿›è¡Œæ£€æŸ¥
- ç¡®ä¿æ€»è´¹ç”¨ä¸è¶…è¿‡é™åˆ¶

**ä½ç½®**: `setProtocolFee()` å‡½æ•° Line 96-100

#### 7. ä¹°å…¥å…¬å¼æº¢å‡ºæ£€æŸ¥ âœ… å·²ä¿®å¤
**é—®é¢˜**: å¯èƒ½å­˜åœ¨çš„æº¢å‡ºé£é™©
**ä¿®å¤**:
- æ·»åŠ äº†x1 > x0æ£€æŸ¥
- æ·»åŠ äº†tokensBought > 0æ£€æŸ¥

**ä½ç½®**: `_buy()` å‡½æ•° Line 313-315

## ä»£ç æ”¹è¿›

### 1. æ³¨é‡Šå®Œå–„
- æ·»åŠ äº†è¯¦ç»†çš„è®¾è®¡è¯´æ˜
- è§£é‡Šäº†ä¹°å…¥å–å‡ºå…¬å¼ä¸ä¸€è‡´çš„åŸå› 
- æ·»åŠ äº†æ•°å­¦éªŒè¯æ³¨é‡Š

### 2. å®‰å…¨æ£€æŸ¥å¢å¼º
- æ‰€æœ‰å…³é”®è®¡ç®—éƒ½æ·»åŠ äº†å®‰å…¨æ£€æŸ¥
- é˜²æ­¢ä¸‹æº¢å’Œæº¢å‡º
- éªŒè¯è¿”å›å€¼

### 3. é”™è¯¯å¤„ç†æ”¹è¿›
- Viewå‡½æ•°ä¸å†ä½¿ç”¨require
- æ·»åŠ äº†æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

## è®¾è®¡å†³ç­–è¯´æ˜

### ä¹°å…¥å–å‡ºå…¬å¼ä¸ä¸€è‡´

**å½“å‰å®ç°**:
- ä¹°å…¥: `tokensBought = (ethForCurve * y0) / x0` (çº¿æ€§)
- å–å‡º: `x1 = (x0 * y0) / y1` (constant product)

**è®¾è®¡ç†ç”±**:
è¿™æ˜¯bonding curveçš„å¸¸è§è®¾è®¡æ¨¡å¼ï¼š
1. **ä¹°å…¥çº¿æ€§å…¬å¼**: ç¡®ä¿ä»·æ ¼å¿«é€Ÿå¢é•¿ï¼Œæ¿€åŠ±æ—©æœŸä¹°å…¥
2. **å–å‡ºconstant product**: ç¡®ä¿ä»·æ ¼å¹³æ»‘ä¸‹é™ï¼Œä¿æŠ¤æµåŠ¨æ€§

è¿™ç§ä¸å¯¹ç§°æ€§æ˜¯bonding curveçš„æ ¸å¿ƒç‰¹æ€§ï¼Œä¸æ˜¯bugã€‚

**æ•°å­¦éªŒè¯**:
- ä¹°å…¥ç¡®ä¿: `new_price > old_price` âœ…
- å–å‡ºç¡®ä¿: `new_price < old_price` âœ…
- è´¹ç”¨æœºåˆ¶é˜²æ­¢å¥—åˆ© âœ…

## æµ‹è¯•å»ºè®®

### å¿…é¡»æµ‹è¯•çš„åœºæ™¯

1. **ä¹°å…¥æµ‹è¯•**
   - [ ] å°é¢ä¹°å…¥ï¼ˆ0.0001 ETH - æœ€å°å€¼ï¼‰
   - [ ] å¤§é¢ä¹°å…¥ï¼ˆ1 ETHï¼‰
   - [ ] è¾¹ç•Œæƒ…å†µï¼ˆæ¥è¿‘MAX_SUPPLYï¼‰
   - [ ] ä»·æ ¼éªŒè¯ï¼ˆä¹°å…¥åä»·æ ¼å¢åŠ ï¼‰

2. **å–å‡ºæµ‹è¯•**
   - [ ] å°é¢å–å‡ºï¼ˆæœ€å°å€¼ï¼‰
   - [ ] å¤§é¢å–å‡º
   - [ ] æç«¯æƒ…å†µï¼ˆå–å‡ºå¤§éƒ¨åˆ†supplyï¼‰
   - [ ] ä»·æ ¼éªŒè¯ï¼ˆå–å‡ºåä»·æ ¼é™ä½ï¼‰
   - [ ] ä¸‹æº¢ä¿æŠ¤æµ‹è¯•

3. **å¥—åˆ©æµ‹è¯•**
   - [ ] ä¹°å…¥åç«‹å³å–å‡º
   - [ ] éªŒè¯æ˜¯å¦æœ‰å¥—åˆ©æœºä¼šï¼ˆåº”è¯¥æ²¡æœ‰ï¼Œå› ä¸ºæœ‰è´¹ç”¨ï¼‰

4. **Graduationæµ‹è¯•**
   - [ ] è¾¾åˆ°20 ETHé˜ˆå€¼
   - [ ] Uniswapè°ƒç”¨æˆåŠŸéªŒè¯
   - [ ] è¿”å›å€¼æ£€æŸ¥
   - [ ] LP tokené”å®šéªŒè¯

5. **è¾¹ç•Œæƒ…å†µ**
   - [ ] æœ€å°äº¤æ˜“é‡‘é¢é™åˆ¶
   - [ ] é›¶å€¼è¾“å…¥
   - [ ] æœ€å¤§å€¼è¾“å…¥

## ä¿®å¤åçš„çŠ¶æ€

### å®‰å…¨æ€§: â­â­â­â­â­ (5/5)
- âœ… æ‰€æœ‰é«˜é£é™©é—®é¢˜å·²ä¿®å¤
- âœ… å®‰å…¨æ£€æŸ¥å®Œå–„
- âœ… è¾¹ç•Œæƒ…å†µå¤„ç†

### æ­£ç¡®æ€§: â­â­â­â­ (4/5)
- âœ… å…¬å¼æœ‰è¯¦ç»†è¯´æ˜å’ŒéªŒè¯
- âœ… è®¾è®¡æ„å›¾æ˜ç¡®
- âš ï¸ éœ€è¦åœ¨æµ‹è¯•ç½‘éªŒè¯å®é™…è¡Œä¸º

### å¯éƒ¨ç½²æ€§: âœ… **Ready for Testnet**
- æ‰€æœ‰å‘ç°çš„é—®é¢˜å·²ä¿®å¤
- ä»£ç é€šè¿‡ç¼–è¯‘
- å»ºè®®è¿›è¡Œæµ‹è¯•ç½‘éªŒè¯

## ä¸‹ä¸€æ­¥

1. âœ… **ç¼–è¯‘éªŒè¯**
   ```bash
   npx hardhat compile
   ```

2. âœ… **è¿è¡Œæµ‹è¯•**
   ```bash
   npx hardhat test
   ```

3. âœ… **éƒ¨ç½²åˆ°Base Sepolia**
   ```bash
   npx hardhat run scripts/deploy.js --network baseSepolia
   ```

4. âœ… **åŠŸèƒ½æµ‹è¯•**
   - æµ‹è¯•ä¹°å…¥å–å‡º
   - æµ‹è¯•graduation
   - éªŒè¯ä»·æ ¼è¡Œä¸º

5. âš ï¸ **ä¸»ç½‘éƒ¨ç½²å‰**
   - ä¸“ä¸šå®‰å…¨å®¡è®¡
   - å®Œæ•´æµ‹è¯•å¥—ä»¶
   - ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ

---

**ä¿®å¤å®Œæˆ**: æ‰€æœ‰é«˜é£é™©ã€ä¸­é£é™©ã€ä½é£é™©é—®é¢˜å·²ä¿®å¤ âœ…
